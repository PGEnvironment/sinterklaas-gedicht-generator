<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Sinterklaas Gedicht Maken met AI | Gratis Gedicht Schrijven - PromptGorillas</title>
    <meta name="title" content="Sinterklaas Gedicht Maken met AI | Gratis Gedicht Schrijven - PromptGorillas">
    <meta name="description" content="Maak gratis een persoonlijk Sinterklaas gedicht met AI! Schrijf originele rijmende gedichten in seconden. Download op mooi papier. Start nu met onze slimme gedichtengenerator.">
    <meta name="keywords" content="sinterklaas gedicht maken, sinterklaas gedicht schrijven, sinterklaas gedicht, sinterklaas gedicht maken met AI, sinterklaas gedicht schrijven met AI, gedicht generator, sinterklaas rijmpje, gedicht maken, AI gedicht, gratis sinterklaas gedicht">
    <meta name="author" content="PromptGorillas">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sinterklaas.promptgorillas.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sinterklaas.promptgorillas.com/">
    <meta property="og:title" content="Sinterklaas Gedicht Maken met AI | Gratis Gedicht Schrijven">
    <meta property="og:description" content="Maak gratis een persoonlijk Sinterklaas gedicht met AI! Schrijf originele rijmende gedichten in seconden. Download op mooi papier.">
    <meta property="og:image" content="https://my.nomadsoffice.nl/images/0/20583320/GeneratedImageNovember042025-5_20PM1-TYZcJ5cXSZAcWkbwhDDm2Q.png">
    <meta property="og:locale" content="nl_NL">
    <meta property="og:site_name" content="PromptGorillas Sinterklaas Gedicht Generator">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sinterklaas.promptgorillas.com/">
    <meta property="twitter:title" content="Sinterklaas Gedicht Maken met AI | Gratis Gedicht Schrijven">
    <meta property="twitter:description" content="Maak gratis een persoonlijk Sinterklaas gedicht met AI! Schrijf originele rijmende gedichten in seconden.">
    <meta property="twitter:image" content="https://my.nomadsoffice.nl/images/0/20583320/GeneratedImageNovember042025-5_20PM1-TYZcJ5cXSZAcWkbwhDDm2Q.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon.png">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Sinterklaas Gedicht Generator",
        "alternateName": "Sinterklaas Gedicht Maken met AI",
        "url": "https://sinterklaas.promptgorillas.com/",
        "description": "Gratis AI-powered tool om persoonlijke Sinterklaas gedichten te maken en te schrijven. Genereer originele rijmende gedichten in seconden en download ze op mooi papier.",
        "applicationCategory": "Productivity",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "provider": {
            "@type": "Organization",
            "name": "PromptGorillas",
            "url": "https://www.promptgorillas.com",
            "logo": "https://cdn1.site-media.eu/images/0/16571142/1-RHSAiszMk8WS9sTiQQfveA.png",
            "sameAs": [
                "https://www.linkedin.com/company/promptgorillas"
            ],
            "contactPoint": {
                "@type": "ContactPoint",
                "telephone": "+31-10-261-3564",
                "contactType": "Customer Service",
                "email": "hello@promptgorillas.com",
                "areaServed": "NL",
                "availableLanguage": ["Dutch", "Nederlands"]
            }
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "127",
            "bestRating": "5",
            "worstRating": "1"
        },
        "featureList": [
            "Gratis Sinterklaas gedichten maken",
            "AI-gegenereerde rijmende gedichten",
            "Persoonlijke en unieke gedichten",
            "Download op mooi Sinterklaas-papier",
            "Verschillende schrijfstijlen (lief, grappig, plagerig, formeel)",
            "Geen registratie vereist"
        ]
    }
    </script>
    
    <!-- FAQ Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Hoe kan ik een Sinterklaas gedicht maken met AI?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Een Sinterklaas gedicht maken met AI is eenvoudig: 1) Start de chat en kies een stijl (lief, grappig, plagerig of formeel). 2) Vertel over de persoon en hun eigenschappen. 3) Onze AI schrijft een persoonlijk gedicht dat je kunt downloaden op mooi Sinterklaas-papier. Het hele proces duurt slechts enkele seconden!"
                }
            },
            {
                "@type": "Question",
                "name": "Is het Sinterklaas gedicht schrijven met AI gratis?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Ja, het schrijven en maken van een Sinterklaas gedicht met onze AI generator is 100% gratis. Je kunt onbeperkt gedichten genereren en downloaden zonder kosten."
                }
            },
            {
                "@type": "Question",
                "name": "Hoe persoonlijk is een Sinterklaas gedicht gemaakt door AI?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Elk Sinterklaas gedicht is uniek en persoonlijk! De AI gebruikt de informatie die je deelt (hobby's, eigenschappen, grappige momenten) om een volledig op maat gemaakt rijmend gedicht te schrijven. Hoe meer details je geeft, hoe persoonlijker het gedicht wordt."
                }
            },
            {
                "@type": "Question",
                "name": "Kan ik het Sinterklaas gedicht aanpassen na het maken?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Ja! Nadat de AI je Sinterklaas gedicht heeft gemaakt, kun je het downloaden als Word document. Dit document kun je dan naar eigen wens aanpassen in Word of Google Docs. Je kunt regels toevoegen, wijzigen of verwijderen om het gedicht nog persoonlijker te maken."
                }
            },
            {
                "@type": "Question",
                "name": "Welke stijlen zijn er voor het schrijven van een Sinterklaas gedicht?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Je kunt kiezen uit 4 verschillende stijlen: Lief en warm (oprecht en hartelijk), Grappig en luchtig (vrolijk en humoristisch), Plagerig/licht gemeen (plagend met een knipoog), of Formeel en traditioneel (klassiek en po√´tisch). De AI past de toon van het gedicht aan op jouw keuze."
                }
            }
        ]
    }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --heading-blue: #112c69;
            --button-blue: #3c66fa;
            --button-blue-hover: #2d4ed4;
            --element-blue: #d7e3fc;
            --white: #FFFFFF;
            --text-dark: rgb(14, 15, 17);
            --text-gray: #6B7280;
        }

        body {
            font-family: 'Instrument Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            font-size: 18px;
        }

        /* Info Bar */
        .info-bar {
            background: var(--heading-blue);
            color: var(--white);
            text-align: center;
            padding: 0.75rem 5%;
            font-size: 14px;
            font-weight: 600;
        }

        /* Header */
        header {
            background: var(--white);
            padding: 1.5rem 5%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo img {
            height: 40px;
            width: auto;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--button-blue);
        }

        /* Hero Section */
        .hero {
            background-image: url('https://my.nomadsoffice.nl/images/0/20583320/GeneratedImageNovember042025-5_20PM1-TYZcJ5cXSZAcWkbwhDDm2Q.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 4rem 5% 6rem;
            position: relative;
            overflow: hidden;
            min-height: 500px;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(17, 44, 105, 0.5);
            z-index: 0;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero-text {
            max-width: 800px;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--white);
            margin-bottom: 1.5rem;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero-text h1 .highlight {
            color: var(--white);
            background: rgba(60, 102, 250, 0.8);
            padding: 0 0.3rem;
            border-radius: 10px;
        }

        .hero-text p {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .cta-button {
            display: inline-block;
            padding: 1rem 2.5rem;
            background: var(--button-blue);
            color: var(--white);
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 18px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(60, 102, 250, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(60, 102, 250, 0.4);
            background: var(--button-blue-hover);
        }


        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 4rem 5%;
        }

        /* How it Works Section */
        .how-it-works {
            margin-bottom: 4rem;
            position: relative;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--heading-blue);
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-gray);
            font-size: 1.1rem;
            max-width: 700px;
            margin: -2rem auto 3rem;
        }

        /* Tips Section */
        .tips-section {
            margin: 4rem 0;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        .tip-card {
            background: var(--white);
            padding: 2.5rem;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border-left: 5px solid var(--button-blue);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .tip-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: var(--element-blue);
            border-radius: 0 0 0 100%;
            opacity: 0.5;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(60, 102, 250, 0.15);
            border-left-color: var(--heading-blue);
        }

        .tip-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .tip-card h4 {
            color: var(--heading-blue);
            margin-bottom: 0.75rem;
            font-size: 1.3rem;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .tip-card p {
            color: var(--text-gray);
            font-size: 16px;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .step {
            text-align: center;
            padding: 2rem;
            background: var(--white);
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .step:hover {
            transform: translateY(-5px);
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: var(--button-blue);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            margin: 0 auto 1.5rem;
        }

        .step h3 {
            font-size: 1.3rem;
            color: var(--heading-blue);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .step p {
            color: var(--text-gray);
            font-size: 16px;
            line-height: 1.7;
        }

        /* Chatbot Section */
        .chatbot-section {
            background: var(--element-blue);
            padding: 4rem;
            border-radius: 30px;
            margin-bottom: 4rem;
        }

        .chatbot-container {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 3rem;
            align-items: stretch;
        }

        .chatbot-mascot {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-mascot img {
            width: 100%;
            max-width: 100%;
            height: auto;
            object-fit: contain;
            transition: opacity 0.5s ease-in-out;
        }
        
        .chatbot-mascot img.fade-out {
            opacity: 0;
        }

        .chat-interface {
            background: var(--white);
            border-radius: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            background: var(--button-blue);
            color: var(--white);
            padding: 1.5rem 2rem;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .chat-messages {
            padding: 2rem;
            min-height: 500px;
            max-height: 600px;
            overflow-y: auto;
            background: var(--white);
            flex: 1;
        }

        .message {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
        }

        .message.bot {
            flex-direction: row;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            overflow: hidden;
        }

        .message-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .message-content {
            background: var(--white);
            padding: 1rem 1.5rem;
            border-radius: 20px;
            max-width: 70%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .message.user .message-content {
            background: var(--heading-blue);
            color: var(--white);
        }

        /* Style Choice Buttons */
        .style-choices {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .style-button {
            padding: 1rem 1.5rem;
            background: var(--white);
            border: 2px solid var(--element-blue);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-family: 'Instrument Sans', sans-serif;
            font-size: 16px;
        }

        .style-button:hover {
            background: var(--element-blue);
            border-color: var(--button-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(60, 102, 250, 0.2);
        }

        .style-button strong {
            color: var(--heading-blue);
            display: block;
            margin-bottom: 0.25rem;
            font-size: 17px;
        }

        .style-button span {
            color: var(--text-gray);
            font-size: 14px;
        }

        /* Poem Generation Loading */
        .poem-generating {
            text-align: center;
            padding: 2rem;
            background: var(--element-blue);
            border-radius: 20px;
            margin: 1rem 0;
            animation: fadeIn 0.5s;
        }

        .poem-loading-content h3 {
            color: var(--heading-blue);
            margin: 1rem 0 0.5rem;
            font-weight: 700;
            font-size: 1.3rem;
        }

        .poem-loading-content p {
            color: var(--text-gray);
            font-size: 1rem;
        }

        .poem-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--element-blue);
            border-top: 4px solid var(--button-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Final Poem Display */
        .final-poem {
            background: linear-gradient(135deg, var(--heading-blue), var(--button-blue));
            padding: 2.5rem;
            border-radius: 30px;
            margin: 1.5rem 0;
            color: white;
            animation: fadeIn 0.5s;
            box-shadow: 0 10px 40px rgba(60, 102, 250, 0.3);
        }

        .poem-content h3 {
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .poem-text {
            background: rgba(255,255,255,0.15);
            padding: 2rem;
            border-radius: 20px;
            line-height: 2;
            font-style: italic;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            white-space: pre-line;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .poem-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .copy-poem-btn,
        .download-word-btn,
        .new-poem-btn {
            background: white;
            color: var(--heading-blue);
            border: none;
            padding: 0.875rem 2rem;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-family: 'Instrument Sans', sans-serif;
        }

        .copy-poem-btn:hover,
        .download-word-btn:hover,
        .new-poem-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .download-word-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .new-poem-btn {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .new-poem-btn:hover {
            background: white;
            color: var(--heading-blue);
        }

        .download-word-btn {
            background: linear-gradient(135deg, var(--button-blue), var(--heading-blue)) !important;
            color: white !important;
            font-size: 18px;
            padding: 1.2rem 3rem !important;
            box-shadow: 0 6px 20px rgba(60, 102, 250, 0.4);
            border: none !important;
        }

        .download-word-btn:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 25px rgba(60, 102, 250, 0.5) !important;
        }

        .new-poem-btn {
            background: transparent !important;
            color: rgba(255, 255, 255, 0.7) !important;
            border: 1px solid rgba(255, 255, 255, 0.5) !important;
            font-size: 14px;
            padding: 0.6rem 1.5rem !important;
        }

        /* Download Modal */
        .download-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .download-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 30px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 3rem;
            position: relative;
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-gray);
            cursor: pointer;
            line-height: 1;
            padding: 0.5rem;
        }

        .modal-close:hover {
            color: var(--heading-blue);
        }

        .modal-header h2 {
            color: var(--heading-blue);
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .modal-header p {
            color: var(--text-gray);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .preview-section {
            margin-bottom: 2rem;
            text-align: center;
        }

        .preview-section h3 {
            color: var(--heading-blue);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .preview-image {
            width: 100%;
            max-width: 400px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            margin: 0 auto;
            filter: blur(8px);
            opacity: 0.6;
            pointer-events: none;
            user-select: none;
        }

        .form-section {
            background: var(--element-blue);
            padding: 2rem;
            border-radius: 20px;
            margin-top: 2rem;
        }

        .form-section h3 {
            color: var(--heading-blue);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: var(--heading-blue);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid var(--white);
            border-radius: 15px;
            font-size: 1rem;
            font-family: 'Instrument Sans', sans-serif;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--button-blue);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            justify-content: center;
        }

        .modal-download-btn {
            background: linear-gradient(135deg, var(--button-blue), var(--heading-blue));
            color: white;
            border: none;
            padding: 1.2rem 3rem;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            font-family: 'Instrument Sans', sans-serif;
            box-shadow: 0 6px 20px rgba(60, 102, 250, 0.4);
        }

        .modal-download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(60, 102, 250, 0.5);
        }

        .modal-download-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .modal-cancel-btn {
            background: transparent;
            color: var(--text-gray);
            border: 2px solid var(--text-gray);
            padding: 1.2rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-family: 'Instrument Sans', sans-serif;
        }

        .modal-cancel-btn:hover {
            background: var(--text-gray);
            color: white;
        }

        .chat-input-area {
            padding: 1.5rem 2rem;
            background: var(--white);
            border-top: 1px solid #E5E7EB;
            display: flex;
            gap: 1rem;
        }

        .chat-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid #E5E7EB;
            border-radius: 50px;
            font-size: 18px;
            font-family: 'Instrument Sans', sans-serif;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: var(--button-blue);
        }

        .send-button {
            padding: 1rem 2rem;
            background: var(--button-blue);
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
        }

        .send-button:hover {
            background: var(--button-blue-hover);
            transform: translateY(-2px);
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Chat Start Screen */
        .chat-start-screen {
            padding: 3rem 2rem;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--white);
            flex: 1;
        }

        .start-content {
            text-align: center;
            max-width: 400px;
        }

        .start-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            animation: float 3s ease-in-out infinite;
        }

        .start-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .start-content h3 {
            color: var(--heading-blue);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .start-content p {
            color: var(--text-gray);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .start-chat-button {
            padding: 1rem 2.5rem;
            background: var(--button-blue);
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Instrument Sans', sans-serif;
            box-shadow: 0 4px 15px rgba(60, 102, 250, 0.3);
        }

        .start-chat-button:hover {
            background: var(--button-blue-hover);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(60, 102, 250, 0.4);
        }

        /* Chat Loading */
        .chat-loading {
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--white);
        }

        .loading-dots {
            display: flex;
            gap: 0.5rem;
        }

        .loading-dots span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--button-blue);
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dots span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .loading-dots span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        /* Live Statistics Section */
        .live-stats-section {
            margin-bottom: 4rem;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--white);
            padding: 3rem 2rem;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid var(--element-blue);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(60, 102, 250, 0.15);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: var(--heading-blue);
        }

        .stat-label {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-gray);
        }

        .recent-poems {
            background: var(--element-blue);
            padding: 3rem;
            border-radius: 30px;
            margin-top: 2rem;
        }

        .recent-poems h3 {
            color: var(--heading-blue);
            margin-bottom: 2rem;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .poem-carousel {
            position: relative;
            overflow: hidden;
            min-height: 200px;
        }

        .poem-slide {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 1rem;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .poem-slide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--element-blue);
        }

        .poem-slide-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .poem-slide-badge {
            background: var(--button-blue);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .poem-slide-time {
            color: var(--text-gray);
            font-size: 0.9rem;
        }

        .poem-slide-content {
            color: var(--heading-blue);
            font-style: italic;
            line-height: 1.8;
            font-size: 1rem;
            white-space: pre-line;
            max-height: 200px;
            overflow: hidden;
            position: relative;
        }

        .poem-slide-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: linear-gradient(transparent, white);
        }

        .loading-stats {
            text-align: center;
            padding: 3rem;
            color: var(--text-gray);
        }

        .loading-stats .loading-dots {
            display: inline-flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        /* Examples Section - keep for mobile fallback */
        .examples {
            margin-bottom: 4rem;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }

        .example-card {
            background: var(--white);
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .example-card:hover {
            transform: translateY(-5px);
        }

        .example-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .example-content {
            padding: 1.5rem;
        }

        .example-content h3 {
            color: var(--heading-blue);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .example-content p {
            color: var(--text-gray);
            font-style: italic;
            line-height: 1.8;
            font-size: 16px;
        }

        /* Footer */
        footer {
            background: var(--heading-blue);
            color: var(--white);
            padding: 3rem 5%;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 3rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--white);
            font-weight: 700;
        }

        .footer-section p,
        .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .social-links a:hover {
            background: var(--button-blue);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 2rem auto 0;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero-content {
                text-align: center;
            }

            .hero-text {
                max-width: 100%;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .steps,
            .examples-grid,
            .stats-container {
                grid-template-columns: 1fr;
            }

            .tips-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .chatbot-container {
                grid-template-columns: 1fr;
            }

            .chatbot-section,
            .tips-section {
                padding: 2rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 575px) {
            .nav-links {
                display: none;
            }

            .hero-text h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Info Bar -->
    <div class="info-bar">
        üéâ Speciaal voor Sinterklaas 2025! Maak nu gratis je eigen Sinterklaas gedicht met AI
    </div>

    <!-- Header -->
    <header>
        <nav>
            <div class="logo">
                <img src="https://cdn1.site-media.eu/images/0/16571142/1-RHSAiszMk8WS9sTiQQfveA.png" alt="PromptGorillas Logo">
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#hoe-werkt-het">Hoe werkt het</a></li>
                <li><a href="#voorbeelden">Voorbeelden</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <div class="hero-text">
                <h1>Schrijf je eigen<br><span class="highlight">Sinterklaas gedicht met AI</span></h1>
                <p>Maak gratis een persoonlijk Sinterklaas gedicht met onze AI gedichtengenerator. Schrijf originele rijmende gedichten in seconden. Download op mooi papier!</p>
                <a href="#chatbot" class="cta-button">Sinterklaas Gedicht Maken ‚Üí</a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- How it Works Section -->
        <section class="how-it-works" id="hoe-werkt-het">
            <h2 class="section-title">Hoe een Sinterklaas gedicht maken?</h2>
            <p class="section-subtitle">In slechts 3 eenvoudige stappen een persoonlijk Sinterklaas gedicht schrijven met AI!</p>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Start de chat</h3>
                    <p>Kies eerst een stijl voor je gedicht: lief, grappig, plagerig of formeel. De chatbot past zich aan jouw voorkeur aan.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Deel je verhaal</h3>
                    <p>Vertel over de persoon: hobby's, eigenschappen, grappige momenten. Onze AI schrijft een persoonlijk gedicht speciaal voor hen.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Download op mooi papier</h3>
                    <p>Gedicht klaar? Download het als Word document op prachtig Sinterklaas-papier en pas het nog aan naar wens!</p>
                </div>
            </div>
        </section>

        <!-- Chatbot Section -->
        <section class="chatbot-section" id="chatbot">
            <h2 class="section-title">Sinterklaas Gedicht Maken met AI</h2>
            <div class="chatbot-container">
                <div class="chatbot-mascot">
                    <img id="mascotImage" src="https://my.nomadsoffice.nl/images/0/20583325/SinterklaasGedichtGenerator-PromptGorillas-pRf3narfhykv3faWOe9IWw.png" alt="Sinterklaas gedicht maken met AI - PromptGorillas mascotte">
                </div>
                <div class="chat-interface">
                    <div class="chat-header">
                        Sinterklaas Gedicht Schrijven met AI
                    </div>
                    
                    <!-- Start Screen -->
                    <div class="chat-start-screen" id="chatStartScreen">
                        <div class="start-content">
                            <div class="start-icon">
                                <img src="https://my.nomadsoffice.nl/images/0/20583442/SinterklaasGedichtGenerator-PromptGorillas2-K10V0pqhbwOCPwWSJCIqAw.png" alt="Sinterklaas gedicht schrijven - Start je gedicht">
                            </div>
                            <h3>Welkom bij de AI Sinterklaas Gedicht Generator!</h3>
                            <p>Klik op de knop hieronder om te beginnen met het maken van je persoonlijke Sinterklaas gedicht. Schrijf in seconden een uniek rijmend gedicht!</p>
                            <button class="start-chat-button" id="startChatBtn">Start Gedicht Maken</button>
                        </div>
                    </div>

                    <!-- Chat Messages -->
                    <div class="chat-messages" id="chatMessages" style="display: none;">
                        <!-- Messages will be added here dynamically -->
                    </div>

                    <!-- Chat Input -->
                    <div class="chat-input-area" id="chatInputArea" style="display: none;">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Vertel over de persoon en het cadeau...">
                        <button class="send-button" id="sendBtn">Verstuur</button>
                    </div>

                    <!-- Loading Indicator -->
                    <div class="chat-loading" id="chatLoading" style="display: none;">
                        <div class="loading-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Live Statistics Section -->
        <section class="live-stats-section" id="voorbeelden">
            <h2 class="section-title">Live Statistieken - Sinterklaas Gedichten</h2>
            <p class="section-subtitle">Zie hoeveel mensen al hun Sinterklaas gedicht hebben gemaakt met AI!</p>
            
            <div id="statsLoading" class="loading-stats">
                <p>Statistieken worden geladen...</p>
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <div id="statsContent" style="display: none;">
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">‚úçÔ∏è</div>
                        <div class="stat-number" id="totalPoems">0</div>
                        <div class="stat-label">Gedichten Geschreven</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÑ</div>
                        <div class="stat-number" id="totalDownloads">0</div>
                        <div class="stat-label">Downloads op Mooi Papier</div>
                    </div>
                </div>

                <div class="recent-poems">
                    <h3>Recent Geschreven Gedichten</h3>
                    <div class="poem-carousel" id="poemCarousel">
                        <!-- Recent poems will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Tips Section -->
        <section class="tips-section">
            <h2 class="section-title">Tips voor het Perfecte Sinterklaas Gedicht Schrijven</h2>
            <p class="section-subtitle">Maak je Sinterklaas gedicht extra speciaal met deze handige tips</p>
            <div class="tips-grid">
                <div class="tip-card">
                    <span class="tip-icon">üéØ</span>
                    <h4>Wees specifiek</h4>
                    <p>Hoe meer details je geeft over de persoon, hoe persoonlijker en leuker het gedicht wordt!</p>
                </div>
                <div class="tip-card">
                    <span class="tip-icon">üòÑ</span>
                    <h4>Humor is key</h4>
                    <p>Vertel grappige anekdotes of gekke gewoontes - daar kan de AI de leukste rijmen van maken.</p>
                </div>
                <div class="tip-card">
                    <span class="tip-icon">üéÅ</span>
                    <h4>Hint naar het cadeau</h4>
                    <p>Geef een subtiele hint over het cadeau en laat de AI daar een mooie verwijzing naar maken.</p>
                </div>
                <div class="tip-card">
                    <span class="tip-icon">‚ú®</span>
                    <h4>Pas aan naar wens</h4>
                    <p>Het gegenereerde gedicht is een basis - je kunt het altijd nog persoonlijker maken!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>PromptGorillas</h3>
                <p>AI toegankelijk maken door middel van trainingen, consultancy en automations.</p>
                <p style="margin-top: 1rem; font-size: 0.9rem;">Maak gratis een Sinterklaas gedicht met onze AI gedichtengenerator. Schrijf persoonlijke rijmende gedichten in seconden!</p>
                <div class="social-links">
                    <a href="https://www.linkedin.com/company/promptgorillas" target="_blank" title="LinkedIn">in</a>
                    <a href="#" title="Twitter">ùïè</a>
                    <a href="#" title="Facebook">f</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Links</h3>
                <a href="https://www.promptgorillas.com" target="_blank">Hoofdwebsite</a>
                <a href="https://www.promptgorillas.com/over-ons" target="_blank">Over Ons</a>
                <a href="https://www.promptgorillas.com/alle-masterclasses-voor-bedrijven" target="_blank">AI Trainingen</a>
                <a href="https://www.promptgorillas.com/contact" target="_blank">Contact</a>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>üìß hello@promptgorillas.com</p>
                <p>üìû 010 261 3564</p>
                <p>üìç Blaak 34, Rotterdam</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 PromptGorillas. Alle rechten voorbehouden.</p>
        </div>
    </footer>

    <!-- Download Modal -->
    <div class="download-modal" id="downloadModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeDownloadModal()">√ó</button>
            
            <div class="modal-header">
                <h2>Download je Gedicht op Mooi Papier</h2>
                <p>Ontvang je persoonlijke Sinterklaasgedicht professioneel opgemaakt op prachtig Sinterklaas-papier. Je kunt de tekst daarna nog aanpassen naar eigen voorkeur in Word of Docs!</p>
            </div>

            <div class="preview-section">
                <h3>Zo komt jouw gedicht eruit te zien:</h3>
                <p style="color: var(--text-gray); font-size: 0.9rem; margin-bottom: 1rem;">(voorbeeld preview - jouw eigen gedicht zal hier staan)</p>
                <img src="https://my.nomadsoffice.nl/images/0/20601901/Schermafbeelding2025-11-05101718-AfAgY7WJqd9gW-e1KvC0iQ.png" alt="Voorbeeld Sinterklaas Gedicht" class="preview-image">
            </div>

            <div class="form-section">
                <h3>Vul je gegevens in om te downloaden:</h3>
                <form id="downloadForm" onsubmit="submitDownloadForm(event)">
                    <div class="form-group">
                        <label for="downloadName">Jouw naam *</label>
                        <input type="text" id="downloadName" name="name" required placeholder="Bijv. Jan de Vries">
                    </div>
                    <div class="form-group">
                        <label for="downloadEmail">E-mailadres *</label>
                        <input type="email" id="downloadEmail" name="email" required placeholder="jouw@email.nl">
                    </div>
                    <div class="modal-actions">
                        <button type="button" onclick="closeDownloadModal()" class="modal-cancel-btn">Annuleren</button>
                        <button type="submit" class="modal-download-btn" id="modalDownloadBtn">Download Word Document</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Configuration - Override in Netlify environment variables or here -->
    <script>
        // Set backend URL for production (can be overridden via window.BACKEND_URL)
        window.BACKEND_URL = window.BACKEND_URL || 'https://sinterklaas-poem-backend.onrender.com';
        window.WEBHOOK_URL = window.WEBHOOK_URL || 'https://dev.promptgorillas.com/webhook/receive_message';
    </script>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Configuration - Backend URLs (can be overridden by environment)
        const CONFIG = {
            // Backend API base URL - defaults to localhost for development
            // Set window.BACKEND_URL before page load to override
            BACKEND_URL: window.BACKEND_URL || 'http://localhost:3000',
            // n8n webhook URL - defaults to dev environment
            // Set window.WEBHOOK_URL before page load to override
            WEBHOOK_URL: window.WEBHOOK_URL || 'https://dev.promptgorillas.com/webhook/receive_message',
            // n8n styling webhook URL for Word generation
            STYLING_WEBHOOK_URL: window.STYLING_WEBHOOK_URL || 'https://dev.promptgorillas.com/webhook/styling-gedicht'
        };

        // Chat functionality
        let sessionId = null;
        let poemEventSource = null; // SSE connection

        // DOM elements
        const startChatBtn = document.getElementById('startChatBtn');
        const chatStartScreen = document.getElementById('chatStartScreen');
        const chatMessages = document.getElementById('chatMessages');
        const chatInputArea = document.getElementById('chatInputArea');
        const chatLoading = document.getElementById('chatLoading');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');

        // Generate unique session ID
        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Add message to chat
        function addMessage(content, isUser = false, includeStyleButtons = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'message user' : 'message';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar';
            const avatarImg = document.createElement('img');
            if (isUser) {
                // User avatar - kan eventueel een andere afbeelding zijn
                avatarImg.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23112c69"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>';
            } else {
                // Bot avatar - Sinterklaas afbeelding
                avatarImg.src = 'https://my.nomadsoffice.nl/images/0/20583442/SinterklaasGedichtGenerator-PromptGorillas2-K10V0pqhbwOCPwWSJCIqAw.png';
            }
            avatarImg.alt = isUser ? 'Gebruiker' : 'AI Sinterklaas Gedicht Generator';
            avatarDiv.appendChild(avatarImg);
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const p = document.createElement('p');
            p.innerHTML = content.replace(/\n/g, '<br>');
            contentDiv.appendChild(p);
            
            // Add style choice buttons if requested
            if (includeStyleButtons) {
                const styleChoices = document.createElement('div');
                styleChoices.className = 'style-choices';
                
                const styles = [
                    { emoji: 'ü§ó', name: 'Lief en warm', desc: 'Oprecht en hartelijk', value: '1. Lief en warm' },
                    { emoji: 'üòÑ', name: 'Grappig en luchtig', desc: 'Vrolijk en humoristisch', value: '2. Grappig en luchtig' },
                    { emoji: 'üòè', name: 'Plagerig/licht gemeen', desc: 'Plagend met een knipoog', value: '3. Plagerig/licht gemeen' },
                    { emoji: 'üé©', name: 'Formeel en traditioneel', desc: 'Klassiek en po√´tisch', value: '4. Formeel en traditioneel' }
                ];
                
                styles.forEach(style => {
                    const button = document.createElement('button');
                    button.className = 'style-button';
                    button.innerHTML = `${style.emoji} <strong>${style.name}</strong><span>${style.desc}</span>`;
                    button.onclick = () => handleStyleChoice(style.value);
                    styleChoices.appendChild(button);
                });
                
                contentDiv.appendChild(styleChoices);
            }
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Show/hide loading indicator
        function setLoading(isLoading) {
            if (isLoading) {
                chatLoading.style.display = 'flex';
                sendBtn.disabled = true;
                chatInput.disabled = true;
            } else {
                chatLoading.style.display = 'none';
                sendBtn.disabled = false;
                chatInput.disabled = false;
            }
        }

        // Show poem generating loading state
        function showPoemGenerating() {
            // Check if already showing
            if (document.getElementById('poemGenerating')) {
                return;
            }

            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'poemGenerating';
            loadingDiv.className = 'poem-generating';
            loadingDiv.innerHTML = `
                <div class="poem-loading-content">
                    <div class="poem-spinner"></div>
                    <h3>Je gedicht wordt geschreven...</h3>
                    <p>Rijmpiet is hard aan het werk! üìù</p>
                </div>
            `;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Disable input while generating
            chatInput.disabled = true;
            sendBtn.disabled = true;
        }

        // Start SSE connection for real-time poem status updates
        function startPoemSSE() {
            // Close existing connection if any
            if (poemEventSource) {
                poemEventSource.close();
            }

            if (!sessionId) {
                console.error('Cannot start SSE: no session ID');
                return;
            }

            // Create SSE connection
            const sseUrl = `${CONFIG.BACKEND_URL}/stream/${sessionId}`;
            console.log('Connecting to SSE:', sseUrl);
            
            poemEventSource = new EventSource(sseUrl);

            // Handle connection open
            poemEventSource.onopen = function() {
                console.log('SSE connection opened');
            };

            // Handle incoming messages
            poemEventSource.onmessage = function(event) {
                try {
                    const data = JSON.parse(event.data);
                    console.log('SSE message received:', data);

                    // Handle different statuses
                    if (data.status === 'generating') {
                        showPoemGenerating();
                    } else if (data.status === 'completed' && data.poem) {
                        // Remove loading state if shown
                        const loadingDiv = document.getElementById('poemGenerating');
                        if (loadingDiv) {
                            loadingDiv.remove();
                        }
                        
                        // Display the poem
                        displayPoem(data.poem);
                        
                        // Close SSE connection
                        poemEventSource.close();
                        poemEventSource = null;
                    }
                } catch (error) {
                    console.error('Error parsing SSE message:', error);
                }
            };

            // Handle errors
            poemEventSource.onerror = function(error) {
                console.error('SSE connection error:', error);
                // Connection will auto-reconnect, but we can also handle it manually
            };
        }

        // Stop SSE connection
        function stopPoemSSE() {
            if (poemEventSource) {
                poemEventSource.close();
                poemEventSource = null;
            }
        }

        // Display the final poem
        function displayPoem(poem) {
            const poemDiv = document.createElement('div');
            poemDiv.className = 'final-poem';
            poemDiv.innerHTML = `
                <div class="poem-content">
                    <h3>‚ú® Jouw Sinterklaasgedicht ‚ú®</h3>
                    <div class="poem-text">${poem.replace(/\n/g, '<br>')}</div>
                    <div class="poem-actions">
                        <button onclick="showDownloadModal()" class="download-word-btn">üìÑ Download op Mooi Sinterklaas Papier</button>
                        <button onclick="startNewPoem()" class="new-poem-btn">Nieuw Gedicht Maken</button>
                    </div>
                </div>
            `;
            chatMessages.appendChild(poemDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Replace mascot image with happy version when poem is complete
            const mascotImage = document.getElementById('mascotImage');
            if (mascotImage) {
                // Fade out
                mascotImage.classList.add('fade-out');
                
                // Change image after fade out
                setTimeout(() => {
                    mascotImage.src = 'https://my.nomadsoffice.nl/images/0/20583323/SinterklaasGedichtGenerator-PromptGorillas1-wR2AvAa9Ooq5b-IIb2jmfQ.png';
                    mascotImage.alt = 'Sinterklaas gedicht succesvol gemaakt - Blije PromptGorillas mascotte';
                    
                    // Fade in
                    mascotImage.classList.remove('fade-out');
                }, 500); // Match CSS transition duration
            }
        }

        // Show download modal
        function showDownloadModal() {
            const modal = document.getElementById('downloadModal');
            modal.classList.add('active');
            
            // Clear previous form data
            document.getElementById('downloadForm').reset();
        }

        // Close download modal
        function closeDownloadModal() {
            const modal = document.getElementById('downloadModal');
            modal.classList.remove('active');
        }

        // Close modal when clicking outside
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('downloadModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeDownloadModal();
                    }
                });
            }
        });

        // Submit download form
        async function submitDownloadForm(event) {
            event.preventDefault();
            
            const name = document.getElementById('downloadName').value;
            const email = document.getElementById('downloadEmail').value;
            
            // Close modal
            closeDownloadModal();
            
            // Proceed with download
            downloadWord(name, email);
        }

        // Download poem as Word document
        async function downloadWord(userName, userEmail) {
            const poemText = document.querySelector('.poem-text').innerText;
            
            // Show loading indicator
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'poem-generating';
            loadingDiv.id = 'wordGenerating';
            loadingDiv.innerHTML = `
                <div class="poem-loading-content">
                    <div class="poem-spinner"></div>
                    <h3>Word document wordt gegenereerd...</h3>
                    <p>Even geduld, we maken het extra mooi voor je!</p>
                </div>
            `;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            try {
                // Send to n8n webhook with user info
                const response = await fetch(CONFIG.STYLING_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        session_id: sessionId,
                        poem: poemText,
                        user_name: userName,
                        user_email: userEmail
                    })
                });

                if (!response.ok) {
                    throw new Error('Webhook response was not ok');
                }

                // Remove loading indicator
                const loadingIndicator = document.getElementById('wordGenerating');
                if (loadingIndicator) {
                    loadingIndicator.remove();
                }

                // Check if response is a file (blob) or JSON with file data
                const contentType = response.headers.get('content-type');
                
                if (contentType && contentType.includes('application/vnd.openxmlformats')) {
                    // Direct file response
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `sinterklaas_gedicht_${sessionId}.docx`;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    document.body.removeChild(a);
                    
                    // Show success message
                    addMessage('‚úì Je gedicht is gedownload! Check je Downloads map. Je kunt de tekst nu aanpassen in Word of Google Docs naar eigen voorkeur.', false);
                } else {
                    // JSON response with file data (base64)
                    const data = await response.json();
                    
                    if (data.file_data) {
                        // Convert base64 to blob
                        const byteCharacters = atob(data.file_data);
                        const byteNumbers = new Array(byteCharacters.length);
                        for (let i = 0; i < byteCharacters.length; i++) {
                            byteNumbers[i] = byteCharacters.charCodeAt(i);
                        }
                        const byteArray = new Uint8Array(byteNumbers);
                        const blob = new Blob([byteArray], { 
                            type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' 
                        });
                        
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = data.file_name || `sinterklaas_gedicht_${sessionId}.docx`;
                        document.body.appendChild(a);
                        a.click();
                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(a);
                        
                        // Show success message
                        addMessage('‚úì Je gedicht is gedownload! Check je Downloads map. Je kunt de tekst nu aanpassen in Word of Google Docs naar eigen voorkeur.', false);
                    } else {
                        throw new Error('No file data in response');
                    }
                }
            } catch (error) {
                console.error('Error downloading Word:', error);
                
                // Remove loading indicator
                const loadingIndicator = document.getElementById('wordGenerating');
                if (loadingIndicator) {
                    loadingIndicator.remove();
                }
                
                addMessage('Sorry, er ging iets mis bij het genereren van het Word document. Probeer het opnieuw!', false);
            }
        }

        // Start new poem session
        function startNewPoem() {
            location.reload();
        }

        // Handle style choice button click
        function handleStyleChoice(styleValue) {
            // Add user's choice to chat
            addMessage(styleValue, true);
            
            // Send to webhook
            sendMessage(styleValue);
        }

        // Send message to webhook
        async function sendMessage(message) {
            try {
                setLoading(true);
                
                const response = await fetch(CONFIG.WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        session_id: sessionId
                    })
                });

                if (!response.ok) {
                    throw new Error('Webhook response was not ok');
                }

                const data = await response.json();
                
                console.log('Received data:', data); // Debug log
                
                // Add bot response to chat
                if (data.response) {
                    addMessage(data.response, false);
                }
                
                // Update session ID if provided
                if (data.session_id) {
                    sessionId = data.session_id;
                }
                
                // Note: Polling handles status checking every 7 seconds
                
            } catch (error) {
                console.error('Error sending message:', error);
                addMessage('Sorry, er ging iets mis. Probeer het opnieuw!', false);
            } finally {
                setLoading(false);
            }
        }

        // Start chat session
        startChatBtn.addEventListener('click', function() {
            // Generate session ID
            sessionId = generateSessionId();
            console.log('Chat started with session ID:', sessionId);
            
            // Hide start screen, show chat
            chatStartScreen.style.display = 'none';
            chatMessages.style.display = 'block';
            chatInputArea.style.display = 'flex';
            
            // Add welcome message with style choices
            const welcomeMessage = '<strong>Ho ho ho! Welkom bij Rijmpiet!</strong><br><br>' +
                'Ik help je graag met een origineel Sinterklaasgedicht. Welke stijl past het beste bij de ontvanger?';
            
            addMessage(welcomeMessage, false, true);
            
            // Start SSE connection for real-time poem status updates
            startPoemSSE();
            
            // Focus on input
            chatInput.focus();
        });

        // Send button click
        sendBtn.addEventListener('click', function() {
            const message = chatInput.value.trim();
            if (message && sessionId) {
                // Add user message to chat
                addMessage(message, true);
                
                // Clear input
                chatInput.value = '';
                
                // Send to webhook
                sendMessage(message);
            }
        });

        // Enter key to send
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendBtn.click();
            }
        });

        // ====== SUPABASE LIVE STATISTICS ======
        
        // Supabase configuration
        const SUPABASE_CONFIG = {
            url: 'https://ozcmzrleqmsqetjjusok.supabase.co',
            anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96Y216cmxlcW1zcWV0amp1c29rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzMzU1MDUsImV4cCI6MjA3NzkxMTUwNX0.jDkUtpTHd6BiUamv8Oq2UcSEbI60YrtzFEmECjs5Tyg'
        };

        // Format time ago
        function timeAgo(date) {
            const seconds = Math.floor((new Date() - new Date(date)) / 1000);
            
            let interval = Math.floor(seconds / 31536000);
            if (interval >= 1) return interval + ' jaar geleden';
            
            interval = Math.floor(seconds / 2592000);
            if (interval >= 1) return interval + ' maanden geleden';
            
            interval = Math.floor(seconds / 86400);
            if (interval >= 1) return interval + ' dagen geleden';
            
            interval = Math.floor(seconds / 3600);
            if (interval >= 1) return interval + ' uur geleden';
            
            interval = Math.floor(seconds / 60);
            if (interval >= 1) return interval + ' minuten geleden';
            
            return 'Zojuist';
        }

        // Truncate poem text
        function truncatePoem(text, maxLength = 300) {
            if (!text) return 'Geen gedichttekst beschikbaar';
            
            // Keep the original formatting with line breaks
            text = text.trim();
            
            if (text.length <= maxLength) return text;
            
            // Try to cut at a sentence or clause
            const truncated = text.substring(0, maxLength);
            const lastPeriod = truncated.lastIndexOf('.');
            const lastComma = truncated.lastIndexOf(',');
            const lastNewline = truncated.lastIndexOf('\n');
            const lastSpace = truncated.lastIndexOf(' ');
            
            let cutPoint = lastPeriod > 100 ? lastPeriod : 
                          (lastComma > 100 ? lastComma : 
                          (lastNewline > 100 ? lastNewline :
                          (lastSpace > 100 ? lastSpace : maxLength)));
            
            return text.substring(0, cutPoint) + '...';
        }

        // Fetch statistics from Supabase
        async function fetchStatistics() {
            try {
                const headers = {
                    'apikey': SUPABASE_CONFIG.anonKey,
                    'Authorization': `Bearer ${SUPABASE_CONFIG.anonKey}`,
                    'Content-Type': 'application/json'
                };

                // Fetch total count of poems
                const totalResponse = await fetch(
                    `${SUPABASE_CONFIG.url}/rest/v1/rijmers?select=*&order=created_at.desc`,
                    { headers }
                );
                
                if (!totalResponse.ok) {
                    throw new Error('Failed to fetch statistics');
                }

                const allPoems = await totalResponse.json();
                const totalPoems = allPoems.length;
                
                // Count downloads (where download = true)
                const totalDownloads = allPoems.filter(poem => poem.download === true).length;
                
                // Get last 3 poems
                const recentPoems = allPoems.slice(0, 3);

                return {
                    totalPoems,
                    totalDownloads,
                    recentPoems
                };
            } catch (error) {
                console.error('Error fetching statistics:', error);
                return null;
            }
        }

        // Display statistics
        function displayStatistics(stats) {
            if (!stats) {
                document.getElementById('statsLoading').innerHTML = '<p style="color: #EF4444;">Kon statistieken niet laden. Probeer het later opnieuw.</p>';
                return;
            }

            // Hide loading, show content
            document.getElementById('statsLoading').style.display = 'none';
            document.getElementById('statsContent').style.display = 'block';

            // Animate numbers counting up
            animateNumber('totalPoems', stats.totalPoems);
            animateNumber('totalDownloads', stats.totalDownloads);

            // Display recent poems
            const carousel = document.getElementById('poemCarousel');
            carousel.innerHTML = '';

            if (stats.recentPoems.length === 0) {
                carousel.innerHTML = '<p style="text-align: center; color: var(--text-gray); padding: 2rem;">Nog geen gedichten geschreven. Wees de eerste! üéâ</p>';
                return;
            }

            stats.recentPoems.forEach(poem => {
                const slide = document.createElement('div');
                slide.className = 'poem-slide';
                
                const poemPreview = truncatePoem(poem.rijm);
                const timeAgoText = timeAgo(poem.created_at);
                
                slide.innerHTML = `
                    <div class="poem-slide-header">
                        <div class="poem-slide-meta">
                            ${poem.download ? '<span class="poem-slide-badge">üìÑ Gedownload</span>' : '<span class="poem-slide-badge">‚úçÔ∏è Nieuw</span>'}
                        </div>
                        <div class="poem-slide-time">${timeAgoText}</div>
                    </div>
                    <div class="poem-slide-content">${poemPreview}</div>
                `;
                
                carousel.appendChild(slide);
            });
        }

        // Animate number counting up
        function animateNumber(elementId, targetValue) {
            const element = document.getElementById(elementId);
            const duration = 2000; // 2 seconds
            const steps = 60;
            const stepValue = targetValue / steps;
            const stepDuration = duration / steps;
            let currentValue = 0;

            const interval = setInterval(() => {
                currentValue += stepValue;
                if (currentValue >= targetValue) {
                    element.textContent = targetValue;
                    clearInterval(interval);
                } else {
                    element.textContent = Math.floor(currentValue);
                }
            }, stepDuration);
        }

        // Initialize statistics on page load
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Loading statistics from Supabase...');
            const stats = await fetchStatistics();
            displayStatistics(stats);
            
            // Refresh statistics every 30 seconds
            setInterval(async () => {
                console.log('Refreshing statistics...');
                const stats = await fetchStatistics();
                if (stats) {
                    // Update without animation for refresh
                    document.getElementById('totalPoems').textContent = stats.totalPoems;
                    document.getElementById('totalDownloads').textContent = stats.totalDownloads;
                    
                    // Update carousel
                    const carousel = document.getElementById('poemCarousel');
                    if (stats.recentPoems.length > 0) {
                        carousel.innerHTML = '';
                        stats.recentPoems.forEach(poem => {
                            const slide = document.createElement('div');
                            slide.className = 'poem-slide';
                            
                            const poemPreview = truncatePoem(poem.rijm);
                            const timeAgoText = timeAgo(poem.created_at);
                            
                            slide.innerHTML = `
                                <div class="poem-slide-header">
                                    <div class="poem-slide-meta">
                                        ${poem.download ? '<span class="poem-slide-badge">üìÑ Gedownload</span>' : '<span class="poem-slide-badge">‚úçÔ∏è Nieuw</span>'}
                                    </div>
                                    <div class="poem-slide-time">${timeAgoText}</div>
                                </div>
                                <div class="poem-slide-content">${poemPreview}</div>
                            `;
                            
                            carousel.appendChild(slide);
                        });
                    }
                }
            }, 30000); // Refresh every 30 seconds
        });
    </script>
</body>
</html>

